<!-- TODO: Integrate this into the build system. Should not be release-only! -->
<!-- Heavily based on default html by Flex -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!--  BEGIN Browser History required section -->
<link rel="stylesheet" type="text/css" href="build/release/history/history.css" />
<!--  END Browser History required section -->

<title>Lua Alchemy Control SWF test</title>
<script src="build/release/AC_OETags.js" language="javascript"></script>

<!--  BEGIN Browser History required section -->
<script src="build/release/history/history.js" language="javascript"></script>
<!--  END Browser History required section -->

<style type="text/css">
body { margin: 0px; overflow:hidden }
</style>
<script language="JavaScript" type="text/javascript">
<!--
// -----------------------------------------------------------------------------
// Globals
// Major version of Flash required
var requiredMajorVersion = 10;
// Minor version of Flash required
var requiredMinorVersion = 0;
// Minor version of Flash required
var requiredRevision = 0;
// -----------------------------------------------------------------------------
// -->
</script>
</head>
<body>
<script language="JavaScript" type="text/javascript">
<!--
// Version check for the Flash Player that has the ability to start Player Product Install (6.0r65)
var hasProductInstall = DetectFlashVer(6, 0, 65);

// Version check based upon the values defined in globals
var hasRequestedVersion = DetectFlashVer(requiredMajorVersion, requiredMinorVersion, requiredRevision);

if ( hasProductInstall && !hasRequestedVersion ) {
        // DO NOT MODIFY THE FOLLOWING FOUR LINES
        // Location visited after installation is complete if installation is required
        var MMPlayerType = (isIE == true) ? "ActiveX" : "PlugIn";
        var MMredirectURL = window.location;
    document.title = document.title.slice(0, 47) + " - Flash Player Installation";
    var MMdoctitle = document.title;

        AC_FL_RunContent(
                "src", "playerProductInstall",
                "FlashVars", "MMredirectURL="+MMredirectURL+'&MMplayerType='+MMPlayerType+'&MMdoctitle='+MMdoctitle+"",
                "width", "100%",
                "height", "100%",
                "align", "middle",
                "id", "Control}",
                "quality", "high",
                "bgcolor", "#FFFFFF",
                "name", "Control}",
                "allowScriptAccess","sameDomain",
                "type", "application/x-shockwave-flash",
                "pluginspage", "http://www.adobe.com/go/getflashplayer"
        );
} else if (hasRequestedVersion) {
        // if we've detected an acceptable version
        // embed the Flash Content SWF when all tests are passed
        AC_FL_RunContent(
                        "src", "build/release/Control",
                        "width", "1",
                        "height", "1",
                        "align", "middle",
                        "id", "Control",
                        "quality", "high",
                        "bgcolor", "#FFFFFF",
                        "name", "Control",
                        "allowScriptAccess","sameDomain",
                        "type", "application/x-shockwave-flash",
                        "pluginspage", "http://www.adobe.com/go/getflashplayer"
        );
  } else {  // flash is too old or we can't detect the plugin
    var alternateContent = 'This content requires the Adobe Flash Player. '
        + '<a href=http://www.adobe.com/go/getflash/>Get Flash</a>';
    document.write(alternateContent);
  }
// -->
</script>

<script language="JavaScript" type="text/javascript">
  function callCallback() {
    var flash = document.getElementById("Control");
    var ok = false;
    try {
      alert(flash.callback("42"));
      ok = true;
    } catch (e) {
      // do nothing, probably data is not loaded yet
      //alert(e.message);
    }
    if (!ok) {
      setTimeout("callCallback()", 500); // TODO: Add infinite loop protectionÂ§
    }
  }
  callCallback();
</script>

</body>
</html>
